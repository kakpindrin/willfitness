<?xml version="1.0" encoding="UTF-8" ?>

<odoo>
    <data>

    <!--#######################################################
    #####                   ACTIONS                       #####
    ########################################################-->

    <record id="hr_rfid_card_action" model="ir.actions.act_window">
      <field name="name">Cartes</field>
      <field name="res_model">hr.rfid.card</field>
      <field name="view_mode">tree,form,search</field>
      <field name="context">{"search_default_showall":1}</field>
    </record>

    <record id="hr_rfid_card_type_action" model="ir.actions.act_window">
      <field name="name">Types de Cartes</field>
      <field name="res_model">hr.rfid.card.type</field>
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_card_door_rel_action" model="ir.actions.act_window">
      <field name="name">Relations Carte/Porte</field>
      <field name="res_model">hr.rfid.card.door.rel</field>
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_acc_gr_employee_rel_action" model="ir.actions.act_window">
      <field name="name">Accéder aux relations groupe/employés</field>
      <field name="res_model">hr.rfid.access.group.employee.rel</field>
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_acc_gr_contact_rel_action" model="ir.actions.act_window">
      <field name="name">Accéder aux relations de groupe/contact</field>
      <field name="res_model">hr.rfid.access.group.contact.rel</field>
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_access_group_action" model="ir.actions.act_window">
      <field name="name">Groupes d'accès</field>
      <field name="res_model">hr.rfid.access.group</field>
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_webstack_action" model="ir.actions.act_window">
      <field name="name">Modules</field>
      <field name="res_model">hr.rfid.webstack</field>
      <field name="context">{"search_default_showall":1}</field>
      <field name="view_mode">tree,form,search,calendar,kanban</field>
    </record>

    <record id="hr_rfid_ctrl_action" model="ir.actions.act_window">
      <field name="name">Contrôleurs</field>
      <field name="res_model">hr.rfid.ctrl</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_door_action" model="ir.actions.act_window">
      <field name="name">Portes</field>
      <field name="res_model">hr.rfid.door</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_time_schedule_action" model="ir.actions.act_window">
      <field name="name">Horaires</field>
      <field name="res_model">hr.rfid.time.schedule</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">kanban,tree,form,search</field>
    </record>

    <record id="hr_rfid_reader_action" model="ir.actions.act_window">
      <field name="name">Lecteurs</field>
      <field name="res_model">hr.rfid.reader</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search</field>
    </record>

    <record id="hr_rfid_event_user_action" model="ir.actions.act_window">
      <field name="name">Événements utilisateur</field>
      <field name="res_model">hr.rfid.event.user</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search,calendar,pivot</field>
      <field name="context">{'search_default_this_day':1}</field>
    </record>

    <record id="hr_rfid_event_system_action" model="ir.actions.act_window">
      <field name="name">Événements système</field>
      <field name="res_model">hr.rfid.event.system</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search,calendar,pivot</field>
      <field name="context">{"search_default_this_day":1}</field>
    </record>

    <record id="hr_rfid_command_action" model="ir.actions.act_window">
      <field name="name">Commandes aux modules</field>
      <field name="res_model">hr.rfid.command</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search,calendar</field>
      <field name="context">{"search_default_this_day":1}</field>
    </record>

    <record id="hr_rfid_workcode_action" model="ir.actions.act_window">
      <field name="name">Codes de travail</field>
      <field name="res_model">hr.rfid.workcode</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form</field>
    </record>

    <record id="hr_rfid_zone_action" model="ir.actions.act_window">
      <field name="name">Zones</field>
      <field name="res_model">hr.rfid.zone</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form</field>
    </record>


    <!--#######################################################
    #####                   MENU ITEMS                    #####
    ########################################################-->

    <menuitem id="hr_rfid_main_menu"
              name="Système RFID"
              groups="hr_rfid_group_officer"
              web_icon="hr_rfid,static/description/icon.png" />


    <!--#######################################################
    #####                    EVENTS                       #####
    ########################################################-->

    <menuitem id="hr_rfid_events_menu"
              name="Événements"
              parent="hr_rfid_main_menu"
              groups="hr_rfid_group_officer"
              sequence="0" />

    <menuitem id="hr_rfid_menu_user_events"
              name="Événements utilisateur"
              parent="hr_rfid_events_menu"
              action="hr_rfid_event_user_action"
              groups="hr_rfid_group_officer"
              sequence="0" />

    <menuitem id="hr_rfid_menu_system_events"
              name="Événements système"
              parent="hr_rfid_events_menu"
              action="hr_rfid_event_system_action"
              groups="hr_rfid_group_officer"
              sequence="10" />

    <menuitem id="hr_rfid_menu_commands"
              name="Commandes"
              parent="hr_rfid_events_menu"
              action="hr_rfid_command_action"
              groups="hr_rfid_group_manager"
              sequence="20" />

    <!--#######################################################
    #####                 Données de base                     #####
    ########################################################-->

    <menuitem id="hr_rfid_master_data"
              name="Données de base"
              parent="hr_rfid_main_menu"
              groups="hr_rfid_group_officer"
              sequence="10" />

    <menuitem id="hr_rfid_menu_cards"
              name="Cartes"
              parent="hr_rfid_master_data"
              action="hr_rfid_card_action"
              groups="hr_rfid_group_officer"
              sequence="0" />

    <menuitem id="hr_rfid_menu_card_door_rels"
              name="Relations Carte/Porte"
              parent="hr_rfid_master_data"
              action="hr_rfid_card_door_rel_action"
              groups="base.group_no_one"
              sequence="1000" />

    <menuitem id="hr_rfid_menu_acc_gr_employee_rels"
              name="Accéder aux relations groupe/employés"
              parent="hr_rfid_master_data"
              action="hr_rfid_acc_gr_employee_rel_action"
              groups="base.group_no_one"
              sequence="1010" />

    <menuitem id="hr_rfid_menu_acc_gr_contact_rels"
              name="Accéder aux relations de groupe/contact"
              parent="hr_rfid_master_data"
              action="hr_rfid_acc_gr_contact_rel_action"
              groups="base.group_no_one"
              sequence="1020" />

    <!--#######################################################
    #####                   Paramètres                      #####
    ########################################################-->

    <menuitem id="hr_rfid_settings_menu"
              name="Paramètres"
              parent="hr_rfid_main_menu"
              groups="hr_rfid_group_officer"
              sequence="30" />

    <menuitem id="hr_rfid_menu_card_types"
              name="Types de Cartes"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_card_type_action"
              groups="hr_rfid_group_manager"
              sequence="0" />

    <menuitem id="hr_rfid_menu_access_groups"
              name="Groupes d'accès"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_access_group_action"
              groups="hr_rfid_group_manager"
              sequence="10" />

    <menuitem id="hr_rfid_menu_zones"
              name="Zones"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_zone_action"
              groups="hr_rfid_group_manager"
              sequence="0" />

    <menuitem id="hr_rfid_menu_modules_main_menu"
              name="Modules"
              parent="hr_rfid_settings_menu"
              groups="hr_rfid_group_manager"
              sequence="20" />

    <menuitem id="hr_rfid_menu_controllers"
              name="Contrôleurs"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_ctrl_action"
              groups="hr_rfid_group_manager"
              sequence="30" />

    <menuitem id="hr_rfid_menu_doors"
              name="Portes"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_door_action"
              groups="hr_rfid_group_manager"
              sequence="40" />

    <menuitem id="hr_rfid_menu_time_schedules"
              name="Horaires"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_time_schedule_action"
              groups="hr_rfid_group_manager"
              sequence="50" />

    <menuitem id="hr_rfid_menu_workcodes"
              name="Codes de travail"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_workcode_action"
              groups="hr_rfid_group_manager"
              sequence="60" />

    <menuitem id="hr_rfid_menu_readers"
              name="Lecteurs"
              parent="hr_rfid_settings_menu"
              action="hr_rfid_reader_action"
              groups="hr_rfid_group_manager"
              sequence="70" />

    <!--#######################################################
    #####                   MODULES                       #####
    ########################################################-->

    <menuitem id="hr_rfid_menu_modules"
              name="Modules"
              parent="hr_rfid_menu_modules_main_menu"
              action="hr_rfid_webstack_action"
              groups="hr_rfid_group_manager"
              sequence="0" />

    <!--#######################################################
    #####              ACCESS GROUP VIEWS                 #####
    ########################################################-->

    <record id="hr_rfid_access_group_add_doors_wiz" model="ir.ui.view">
      <field name="name">hr.rfid.access.group.add.doors.wiz.form</field>
      <field name="model">hr.rfid.access.group.wizard</field>
      <field name="arch" type="xml">
        <form string="Ajouter des portes">
          <group>
            <field name="acc_gr_doors" attrs="{'invisible': True}" />
            <field name="time_schedule_id" />
            <field name="door_ids" domain="[('id', 'not in', acc_gr_doors)]" widget="many2many_tags" />
          </group>
          <footer>
            <button name="add_doors" type="object"
                    string="Ajouter des portes" class="oe_highlight" />
            <button special="cancel" string="Annuler" />
          </footer>
        </form>
      </field>
    </record>

    <record id="hr_rfid_access_group_del_doors_wiz" model="ir.ui.view">
      <field name="name">hr.rfid.access.group.del.doors.wiz.form</field>
      <field name="model">hr.rfid.access.group.wizard</field>
      <field name="arch" type="xml">
        <form string="Supprimer des portes">
          <group>
            <field name="acc_gr_doors" attrs="{'invisible': True}" />
            <field name="door_ids" domain="[('id', 'in', acc_gr_doors)]" widget="many2many_tags" />
          </group>
          <footer>
            <button name="del_doors" type="object"
                    string="Supprimer des portes" class="oe_highlight" />
            <button special="cancel" string="Annuler" />
          </footer>
        </form>
      </field>
    </record>

    <record id="hr_rfid_access_group_add_doors_wiz_action" model="ir.actions.act_window">
      <field name="name">Ajouter des portes</field>
      <field name="res_model">hr.rfid.access.group.wizard</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_access_group_add_doors_wiz" />
      <field name="target">new</field>
    </record>

    <record id="hr_rfid_access_group_del_doors_wiz_action" model="ir.actions.act_window">
      <field name="name">Supprimer des portes</field>
      <field name="res_model">hr.rfid.access.group.wizard</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_access_group_del_doors_wiz" />
      <field name="target">new</field>
    </record>

    <record id="hr_rfid_access_group_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.access.group.form</field>
      <field name="model">hr.rfid.access.group</field>
      <field name="arch" type="xml">
        <form string="Groupes d'accès">
          <sheet modifiers="{}">
            <div class="oe_button_box" name="button_box" attrs="{'invisible': [('id', '=', False)]}">
              <button name="%(hr_rfid_access_group_add_doors_wiz_action)d"
                      id="hr_rfid_access_group_add_doors_btn"
                      type="action"
                      class="oe_stat_button"
                      icon="fa-plus-square"
                      modifiers="{}"
                      options="{}"
                      string="Ajouter des portes" />
              <button name="%(hr_rfid_access_group_del_doors_wiz_action)d"
                      id="hr_rfid_access_group_del_doors_btn" type="action"
                      class="oe_stat_button"
                      icon="fa-minus-square"
                      modifiers="{}"
                      options="{}"
                      string="Supprimer des portes" />
            </div>
            <div class="oe_title" modifiers="{}">
              <h1>
                <field name="name"/>
              </h1>
            </div>

          <notebook colspan="4" attrs="{'invisible': [('id', '=', False)]}">
            <page string="Doors">
              <field name="door_ids" readonly="1">
                <tree string="Le groupe de portes a accès à">
                  <field name="door_id" />
                  <field name="time_schedule_id" />
                </tree>
              </field>
            </page>

            <page string="Départements">
              <field name="department_ids" readonly="1">
                <tree string="Départements affectés à ce groupe d'accès">
                  <field name="name" />
                  <field name="note" />
                </tree>
              </field>
            </page>

            <page string="Départements (par défaut)"
                  help="Départements qui ont ce groupe d'accès par défaut">
              <field name="default_department_ids" readonly="1">
                <tree>
                  <field name="name" />
                  <field name="note" />
                </tree>
              </field>
            </page>

            <page string="Employés" help="Employés affectés à ce groupe d'accès">
              <field name="employee_ids" readonly="1">
                <tree>
                  <field name="employee_id" />
                  <field name="expiration" />
                </tree>
              </field>
            </page>

            <page string="Contacts" help="Contacts affectés à ce groupe d'accès">
              <field name="contact_ids" readonly="1">
                <tree>
                  <field name="contact_id" />
                  <field name="expiration" />
                </tree>
              </field>
            </page>

            <page string="Tous les Employés" help="Tous les employés affectés à ce groupe d'accès, y compris ceux des groupes d'accès héritiers">
              <field name="all_employee_ids" readonly="1">
                <tree>
                  <field name="employee_id" />
                  <field name="expiration" />
                </tree>
              </field>
            </page>

            <page string="Tous les Contacts" help="All Contacts affectés à ce groupe d'accès, y compris ceux des groupes d'accès héritiers">
              <field name="all_contact_ids" readonly="1">
                <tree>
                  <field name="contact_id" />
                  <field name="expiration" />
                </tree>
              </field>
            </page>

          </notebook>
          <notebook colspan="4" attrs="{'invisible': [('id', '=', False)]}">
            <page string="Groupe d'Accès Hérité">
              <field name="inherited_ids">
                <tree>
                  <field name="name" />
                </tree>
              </field>
            </page>

            <page string="Toutes les portes">
              <field name="all_door_ids" readonly="1">
                <tree string="Le groupe de portes a accès à">
                  <field name="door_id" />
                  <field name="time_schedule_id" />
                </tree>
              </field>
            </page>

            <page string="Groupes d'Accès Héritier">
              <field name="inheritor_ids" readonly="1">
                <tree>
                  <field name="name" />
                </tree>
              </field>
            </page>
          </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>

<!--        TODO remove buttons and move actions-->
    <record id="hr_rfid_access_group_add_doors_action" model="ir.actions.act_window">
        <field name="name">Ajouter des portes</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.rfid.access.group.wizard</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="hr_rfid.hr_rfid_access_group_add_doors_wiz"/>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_access_group"/>
        <field name="binding_view_types">form</field>
        <field name="target">new</field>
    </record>

    <record id="hr_rfid_access_group_del_doors_action" model="ir.actions.act_window">
        <field name="name">Supprimer des portes</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.rfid.access.group.wizard</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="hr_rfid.hr_rfid_access_group_del_doors_wiz"/>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_access_group"/>
        <field name="binding_view_types">form</field>
        <field name="target">new</field>
    </record>

    <record id="hr_rfid_access_group_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.access.group.form</field>
      <field name="model">hr.rfid.access.group</field>
      <field name="arch" type="xml">
        <tree string="Groupes d'accès">
          <field name="name" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_access_group_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.access.group.search</field>
      <field name="model">hr.rfid.access.group</field>
      <field name="arch" type="xml">
        <search string="Groupes d'accès">
          <field name="name" />
        </search>
      </field>
    </record>

    <record id="hr_rfid_access_group_door_rel_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.access.group.door.rel.form</field>
      <field name="model">hr.rfid.access.group.door.rel</field>
      <field name="arch" type="xml">
        <form create="0" edit="0" delete="0">
          <group>
            <field name="access_group_id" />
            <field name="door_id" />
            <field name="time_schedule_id" />
          </group>
        </form>
      </field>
    </record>

    <record id="hr_rfid_acc_gr_employee_rel_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.acc.gr.employee.rel.form</field>
      <field name="model">hr.rfid.access.group.employee.rel</field>
      <field name="arch" type="xml">
        <form string="Accéder aux relations groupe/employés" create="0" edit="0" delete="0">
          <sheet>
            <group>
              <field name="access_group_id" />
              <field name="employee_id" />
              <field name="expiration" />
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="hr_rfid_acc_gr_employee_rel_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.acc.gr.employee.rel.tree</field>
      <field name="model">hr.rfid.access.group.employee.rel</field>
      <field name="arch" type="xml">
        <tree string="Accéder aux relations groupe/employés" create="0" edit="0" delete="0">
          <field name="access_group_id" />
          <field name="employee_id" />
          <field name="expiration" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_acc_gr_contact_rel_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.acc.gr.contact.rel.form</field>
      <field name="model">hr.rfid.access.group.contact.rel</field>
      <field name="arch" type="xml">
        <form string="Accéder aux relations groupe/employés" create="0" edit="0" delete="0">
          <sheet>
            <group>
              <field name="access_group_id" />
              <field name="contact_id" />
              <field name="expiration" />
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="hr_rfid_acc_gr_contact_rel_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.acc.gr.contact.rel.tree</field>
      <field name="model">hr.rfid.access.group.contact.rel</field>
      <field name="arch" type="xml">
        <tree string="Accéder aux relations groupe/employés" create="0" edit="0" delete="0">
          <field name="access_group_id" />
          <field name="contact_id" />
          <field name="expiration" />
        </tree>
      </field>
    </record>

    <!--#######################################################
    #####               Données de base VIEWS                 #####
    ########################################################-->

    <record id="hr_rfid_card_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.card.form</field>
      <field name="model">hr.rfid.card</field>
      <field name="arch" type="xml">
        <form string="Carte RFID">
          <sheet>
            <div class="oe_button_box" name="button_box">
              <button name="toggle_card_active" type="object" class="oe_stat_button" icon="fa-plug" >
                  <field name="active" widget="boolean_button" />
              </button>
		    </div>
            <div class="oe_title">
              <h1>
                <field name="number"/>
              </h1>
            </div>
            <group>
              <group string="Titulaire">
                <field name="employee_id" attrs="{'invisible':[('contact_id','!=',False)]}"/>
                <field name="contact_id" attrs="{'invisible':[('employee_id','!=',False)]}"/>
              </group>
              <group string="Installation">
                <field name="active"/>
                <field name="card_type"/>
                <field name="cloud_card"/>
                <field name="activation_temp_date"/>
              </group>
              <group string="Date Début">
                <field name="activate_on"/>
              </group>
              <group string="Date Fin">
                <field name="deactivate_on"/>
              </group>
              <group colspan="4">
                <field name="door_ids" attrs="{'invisible':[('id','&lt;=',0)]}"/>
              </group>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>

    <record id="hr_rfid_card_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.card.tree</field>
      <field name="model">hr.rfid.card</field>
      <field name="arch" type="xml">
        <tree string="Carte RFID">
          <field name="number" />
          <field name="employee_id" />
          <field name="contact_id" />
          <field name="card_type" />
          <field name="activate_on" />
          <field name="deactivate_on" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_card_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.card.search</field>
      <field name="model">hr.rfid.card</field>
      <field name="arch" type="xml">
        <search string="Carte RFID">
          <field name="number" />
          <field name="card_type" />
          <field name="employee_id">
            <field name="name" />
          </field>
          <field name="contact_id">
            <field name="name" />
          </field>
          <filter string="Afficher Tout" name="showall" context="{'active_test': False}"/>
        </search>
      </field>
    </record>

    <record id="hr_rfid_card_type_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.card.type.form</field>
      <field name="model">hr.rfid.card.type</field>
      <field name="arch" type="xml">
        <form>
          <sheet string="Type de carte">
            <div class="oe_button_box" name="button_box" modifiers="{}">
			        <button name="list_cards_from_this_type" string="Card list" type="object" class="oe_stat_button" icon="fa-list-alt" modifiers="{}" options="{}">
<!--				        <field name="ws_active" widget="boolean_button" modifiers="{}"/>-->
			       </button>
	        	</div>
            <div class="oe_title" modifiers="{}">
              <h1>
                <field name="name"/>
              </h1>
            </div>
            <group>
              <field name="name"/>
            </group>
            <group>
              <field string="Cartes de ce type" name="card_ids" readonly="1">
                <tree>
                  <field name="number"/>
                  <field name="employee_id"/>
                  <field name="contact_id"/>
                </tree>
              </field>
            </group>
            <div class="oe_chatter">
              <field name="message_follower_ids" widget="mail_followers"/>
              <field name="message_ids" widget="mail_thread"/>
            </div>
          </sheet>
        </form>
      </field>
    </record>
<!--    TODO move view to actions-->

    <record model="ir.actions.server" id="list_card_from_this_type_action">
        <field name="name">Liste de cartes</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_card_type"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">action = record.list_cards_from_this_type()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_card_type"/>
        <field name="binding_view_types">form</field>
    </record>


    <record id="hr_rfid_card_type_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.card.type.tree</field>
      <field name="model">hr.rfid.card.type</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_card_type_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.card.type.search</field>
      <field name="model">hr.rfid.card.type</field>
      <field name="arch" type="xml">
        <search>
          <field name="name" />
          <!-- <field name="card_ids">
            <field name="number" />
          </field> -->
        </search>
      </field>
    </record>

    <record id="hr_rfid_card_door_rel_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.card.door.rel.form</field>
      <field name="model">hr.rfid.card.door.rel</field>
      <field name="arch" type="xml">
        <form string="Relations Carte/Porte" create="0" edit="0" delete="0">
          <sheet>
            <group>
              <field name="card_id" />
              <field name="door_id" />
              <field name="time_schedule_id" />
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="hr_rfid_card_door_rel_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.card.door.rel.tree</field>
      <field name="model">hr.rfid.card.door.rel</field>
      <field name="arch" type="xml">
        <tree string="Relations Carte/Porte" create="0" edit="0" delete="0">
          <field name="card_id" />
          <field name="door_id" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_card_door_rel_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.card.door.rel.search</field>
      <field name="model">hr.rfid.card.door.rel</field>
      <field name="arch" type="xml">
        <search string="Relations Carte/Porte">
          <field name="card_id" />
          <field name="door_id" />
        </search>
      </field>
    </record>

    <record id="hr_rfid_employee_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.employee.tree</field>
      <field name="model">hr.employee</field>
      <field name="arch" type="xml">
        <tree string="Employé">
          <field name="name" />
          <field name="department_id" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_employee_action" model="ir.actions.act_window">
      <field name="name">Employés</field>
      <field name="res_model">hr.employee</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search</field>
      <field name="view_id" ref="hr_rfid_employee_view_tree" />
    </record>

    <menuitem id="hr_rfid_menu_employees"
              name="Employés"
              parent="hr_rfid_master_data"
              action="hr_rfid_employee_action"
              groups="hr_rfid_group_officer"
              sequence="0" />

    <record id="hr_rfid_contact_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.contact.tree</field>
      <field name="model">res.partner</field>
      <field name="arch" type="xml">
        <tree string="Contact">
          <field name="name" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_contact_action" model="ir.actions.act_window">
      <field name="name">Contacts</field>
      <field name="res_model">res.partner</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">tree,form,search</field>
      <field name="view_id" ref="hr_rfid_contact_view_tree" />
      <field name="context">{"search_default_type_person":1}</field>
    </record>

    <menuitem id="hr_rfid_menu_contacts"
              name="Contacts"
              parent="hr_rfid_master_data"
              action="hr_rfid_contact_action"
              groups="hr_rfid_group_officer"
              sequence="0" />

    <!--#######################################################
    #####                 WEBSTACK VIEWS                  #####
    ########################################################-->

    <record id="hr_rfid_webstack_discovery_wiz"  model="ir.ui.view">
      <field name="name">hr.rfid.webstack.discovery.wiz.form</field>
      <field name="model">hr.rfid.webstack.discovery</field>
      <field name="arch" type="xml">
        <form string="Découverte de modules">
          <field name="state" invisible="1" />

          <footer states="pre_discovery">
            <button name="discover" type="object" string="Commencer la découverte" class="oe_highlight" />
            <button special="cancel" string="Cancel" />
          </footer>

          <group states="post_discovery">
            <field name="found_webstacks">
              <tree>
                <field name="name" />
                <field name="serial" />
                <field name="active" />
                <field name="hw_version" />
                <field name="version" />
                <field name="last_ip" />
              </tree>
            </field>
            <field name="setup_and_set_to_active"
                   domain="[('id','in',found_webstacks)]"
                   widget="many2many_tags" />
          </group>

          <footer states="post_discovery">
            <button name="setup_modules" type="object" string="Done" class="oe_highlight" />
          </footer>

        </form>
      </field>
    </record>

    <record id="hr_rfid_webstack_discovery_action" model="ir.actions.act_window">
      <field name="name">Découverte des modules</field>
      <field name="res_model">hr.rfid.webstack.discovery</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_webstack_discovery_wiz" />
      <field name="target">new</field>
    </record>

    <menuitem id="hr_rfid_menu_modules_discovery"
              name="Découverte de modules"
              parent="hr_rfid_menu_modules_main_menu"
              action="hr_rfid_webstack_discovery_action"
              groups="hr_rfid_view_module_discovery"
              sequence="10" />

    <record id="hr_rfid_webstack_manual_create_wiz" model="ir.ui.view">
      <field name="name">hr.rfid.webstack.manual.create.wiz.form</field>
      <field name="model">hr.rfid.webstack.manual.create</field>
      <field name="arch" type="xml">
        <form string="Manuel du module Créer">
          <group>
            <field name="webstack_name" />
            <field name="webstack_address" />
          </group>
        </form>
      </field>
    </record>

    <record id="hr_rfid_webstack_manual_create_action" model="ir.actions.act_window">
      <field name="name">Découverte des modules</field>
      <field name="res_model">hr.rfid.webstack.manual.create</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_webstack_manual_create_wiz" />
      <field name="target">new</field>
    </record>

    <menuitem id="hr_rfid_menu_modules_manual_create"
              name="Manuel du module Créer"
              parent="hr_rfid_menu_modules_main_menu"
              action="hr_rfid_webstack_manual_create_action"
              groups="hr_rfid_group_manager"
              sequence="10" />

    <record id="hr_rfid_webstack_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.webstack.form</field>
      <field name="model">hr.rfid.webstack</field>
        <field name="arch" type="xml">
        <form string="Modules RFID">
            <field name="active" invisible="1" string="Active"/>
          <header>
            <button name="action_set_webstack_settings" type="object"
                    string="Module de configuration pour cet odoo"
                    attrs="{'invisible': [('behind_nat','=',True)]}"
                    help="Configurez la pile Web pour qu'elle fonctionne avec cet odoo. Le nom d'utilisateur et le mot de passe du module doivent être définis sur le nom d'utilisateur et le mot de passe de l'administrateur sur le module. La dernière ip doit être définie sur la bonne ip du module" />
            <button name="action_check_if_ws_available" type="object"
                    attrs="{'invisible': [('behind_nat','=',True)]}"
                    string="Tester la connexion du module"
                    help="Connectez-vous au module et demandez des informations." />
            <field name="available" widget="statusbar" />
          </header>
          <sheet modifiers="{}">
            <widget name="web_ribbon" title="Disabled" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
            <div class="oe_title" modifiers="{}">
              <h1>
                <field name="name"/>
              </h1>
            </div>
            <group>
              <group string="Informations système">
                <field name="serial" readonly="1"/>
                <field name="hw_version" readonly="1"/>
                <field name="version" readonly="1"/>
              </group>
              <group string="Sécurité">
                <field name="key"/>
                <field name="module_username"/>
                <field name="module_password" password="True"/>
              </group>
              <group string="Configuration">
                <field name="tz"/>
                <field name="tz_offset" invisible="1" groups="base.group_no_one"/>
                <field name="behind_nat"/>
              </group>
              <group string="Statut">
                <field name="last_ip"/>
                <field name="updated_at" readonly="1"/>
                <field name="http_link" readonly="1" widget="url"/>
              </group>
            </group>

            <notebook>
              <page string="Contrôleurs">
                <field name="controllers" readonly="1">
                  <tree string="Contrôleurs">
                    <field name="name"/>
                    <field name="ctrl_id"/>
                    <field name="hw_version"/>
                    <field name="sw_version"/>
                  </tree>
                </field>
              </page>

              <page string="Événements d'erreur">
                <field name="system_event_ids" readonly="1">
                  <tree string="Événements d'erreur">
                    <field name="controller_id">
                      <field name="name" string="Controller Name"/>
                    </field>
                    <field name="timestamp"/>
                    <field name="error_description"/>
                  </tree>
                </field>
              </page>

              <page string="Commandes">
                <field name="command_ids" readonly="1">
                  <tree string="Commandes">
                    <field name="controller_id"/>
                    <field name="cmd"/>
                    <field name="status"/>
                    <field name="error"/>
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </form>
      </field>
    </record>


    <record id="hr_rfid_webstack_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.webstack.tree</field>
      <field name="model">hr.rfid.webstack</field>
      <field name="arch" type="xml">
        <tree create="0" delete="0" string="RFID Modules"
              decoration-danger="active==False" decoration-success="active==True">
          <field name="name"/>
          <field name="serial"/>
          <field name="hw_version"/>
          <field name="version"/>
          <field name="updated_at"/>
          <field name="last_ip"/>
          <field name="active" invisible="1"/>
<!--          <button name="action_set_active" type="object"-->
<!--                  attrs="{'invisible': [('active','=', True)]}"-->
<!--                  string="Set module to active" />-->
<!--          <button name="action_set_inactive" type="object"-->
<!--                  attrs="{'invisible': [('active','=', False)]}"-->
<!--                  string="Set module to inactive" />-->
        </tree>
      </field>
    </record>

    <record id="hr_rfid_webstack_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.webstack.search</field>
      <field name="model">hr.rfid.webstack</field>
      <field name="arch" type="xml">
        <search string="RFID Modules">
          <field name="name" />
          <field name="serial" />
          <field name="active" />
          <field name="version" />
          <field name="updated_at" />
          <filter string="Show all" name="showall" domain="['|',('active', '=', False),('active', '=', True)]"/>
        </search>
      </field>
    </record>

    <record id="hr_rfid_webstack_view_kanban" model="ir.ui.view">
           <field name="name">hr.rfid.webstack.kanban</field>
           <field name="model">hr.rfid.webstack</field>
           <field name="arch" type="xml">
               <kanban default_order='active desc'>
                   <field name="id"/>
                   <field name="active"/>
                   <field name="last_update"/>
                   <templates>
                       <t t-name="kanban-box">
                       <div class="oe_kanban_global_click">
                            <div class="oe_kanban_details">
                               <div class="o_kanban_record_top">
                                   <div class="o_kanban_record_headings">
                                       <strong class="o_kanban_record_title">
                                           <div class="float-right" attrs="{'invisible': ['|', ('active', '=', False), ('last_update', '=', True)]}">
                                                <span class="fa fa-circle text-success" role="img" aria-label="Enabled" title="Enabled" name="webstack_enabled"></span>
                                           </div>
                                           <div class="float-right" attrs="{'invisible': [('active', '=', True)]}">
                                                <span class="fa fa-circle text-danger" role="img" aria-label="Disabled" title="Disabled" name="webstack_disabled"></span>
                                           </div>
                                           <div class="float-right" attrs="{'invisible': [('last_update', '=', False)]}">
                                                <span class="fa fa-circle text-warning" role="img" aria-label="Disabled" title="Disabled" name="webstack_disabled"></span>
                                           </div>
                                           <h2><field name="name" placeholder="Module's Name"/></h2>
                                       </strong>
                                       <span class="o_kanban_record_subtitle">Version: <field name="version"/></span>
                                       <span class="o_kanban_record_subtitle">Hardware Version: <field name="hw_version"/></span>
                                   </div>
                               </div>
                               <ul>
                                   <li class="o_text_overflow">Last Update: <field name="updated_at" /></li>
                                   <li class="o_force_ltr">Last IP: <field name="last_ip" /></li>
                               </ul>
                           </div>
                       </div>
                       </t>
                   </templates>
               </kanban>
            </field>
    </record>

    <record id="hr_rfid_webstack_view_calendar" model="ir.ui.view">
      <field name="name">hr.rfid.webstack.calendar</field>
      <field name="model">hr.rfid.webstack</field>
      <field name="arch" type="xml">
        <calendar date_start="updated_at" date_stop="updated_at" color="serial">
          <field name="name" />
          <field name="serial" />
        </calendar>
      </field>
    </record>

    <record id="hr_rfid_controller_io_table_wiz" model="ir.ui.view">
      <field name="name">hr.rfid.controller.io.table.wiz</field>
      <field name="model">hr.rfid.ctrl.io.table.wiz</field>
      <field name="arch" type="xml">
        <form string="Afficher/Modifier le tableau des E/S">
          <div>
            <field name="controller_id" invisible="True" />
            <field name="outs" invisible="True" />
            <h1>IO table:</h1>
            <br />
            <field name="io_row_ids" widget="one2many_list">
              <tree create="false" delete="false" editable="bottom" >
                <field name="event_number" />
                <field name="out1" attrs="{'column_invisible': [('parent.outs','&lt;',1)]}" />
                <field name="out2" attrs="{'column_invisible': [('parent.outs','&lt;',2)]}" />
                <field name="out3" attrs="{'column_invisible': [('parent.outs','&lt;',3)]}" />
                <field name="out4" attrs="{'column_invisible': [('parent.outs','&lt;',4)]}" />
                <field name="out5" attrs="{'column_invisible': [('parent.outs','&lt;',5)]}" />
                <field name="out6" attrs="{'column_invisible': [('parent.outs','&lt;',6)]}" />
                <field name="out7" attrs="{'column_invisible': [('parent.outs','&lt;',7)]}" />
                <field name="out8" attrs="{'column_invisible': [('parent.outs','&lt;',8)]}" />
              </tree>
            </field>
          </div>
          <footer>
            <button name="save_table" type="object" string="Save" class="oe_highlight" />
            <button special="cancel" string="Fermer" class="oe_highlight" />
          </footer>
        </form>
      </field>
    </record>

    <record id="hr_rfid_controller_io_table_wiz_action" model="ir.actions.act_window">
      <field name="name">Afficher/Modifier le tableau des E/S</field>
      <field name="res_model">hr.rfid.ctrl.io.table.wiz</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_controller_io_table_wiz" />
      <field name="target">new</field>
    </record>

    <record id="hr_rfid_controller_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.ctrl.form</field>
      <field name="model">hr.rfid.ctrl</field>
      <field name="arch" type="xml">
        <form string="Controleur RFID" create="false">
          <sheet modifiers="{}">
            <div class="oe_button_box" name="button_box" modifiers="{}">
              <button string="Recharger les cartes" name="button_reload_cards" type="object"
                      class="oe_stat_button" icon="fa-refresh" modifiers="{}" options="{}"/>
              <button string="IO Table" name="%(hr_rfid_controller_io_table_wiz_action)d"
                      id="hr_rfid_view_modify_io_table_btn" type="action"
                      groups="hr_rfid.hr_rfid_group_manager" class="oe_stat_button"
                      icon="fa-table" modifiers="{}" options="{}"/>
              <button string="Recharger les informations du contrôleur" name="re_read_ctrl_info" type="object"
                      class="oe_stat_button" icon="fa-refresh" modifiers="{}" options="{}"/>
            </div>
            <div class="oe_title" modifiers="{}">
              <h1 modifiers="{}">
                <field name="name" modifiers="{'required':true}"/>
              </h1>
            </div>
            <group>
              <group string="Informations système">
                <field name="ctrl_id" readonly="1"/>
                <field name="serial_number" readonly="1"/>
                <field name="hw_version" readonly="1"/>
                <field name="sw_version" readonly="1"/>
                <field name="readers" readonly="1"/>
                <field name="temperature" readonly="1" />
                <field name="humidity" readonly="1" />
                <field name="system_voltage" readonly="1" />
                <field name="input_voltage" readonly="1" />
                <field name="last_f0_read" readonly="1" />
              </group>
              <group string="Mémoire interne">
                <field name="max_cards_count" readonly="1"/>
                <field name="max_events_count" readonly="1"/>
              </group>
              <group string="Configuration">
                <field name="mode" />
                <field name="external_db" />
                <field name="read_b3_cmd" />
                <field name="relay_time_factor" readonly="1" />
                <field name="dual_person_mode" readonly="1" />
                <field name="webstack_id" readonly="1"/>
              </group>
            </group>
            <notebook>
              <page string="Portes">
                <field name="door_ids" readonly="1">
                  <tree string="Portes">
                    <field name="name"/>
                    <field name="number"/>
                  </tree>
                </field>
              </page>

              <page string="Lecteurs">
                <field name="reader_ids" readonly="1">
                  <tree string="Lecteurs">
                    <field name="number"/>
                    <field name="reader_type"/>
                  </tree>
                </field>
              </page>

              <page string="Événements d'erreur">
                <field name="system_event_ids" readonly="1">
                  <tree string="Événements d'erreur">
                    <field name="controller_id"/>
                    <field name="timestamp"/>
                    <field name="error_description"/>
                  </tree>
                </field>
              </page>

              <page string="Commandes">
                <field name="command_ids" readonly="1">
                  <tree string="Commandes">
                    <field name="webstack_id"/>
                    <field name="cmd"/>
                    <field name="status"/>
                    <field name="error"/>
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </form>
      </field>
    </record>

    <record model="ir.actions.server" id="action_reload_cards">
        <field name="name">Recharger les cartes</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_ctrl"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">record.button_reload_cards()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_ctrl"/>
        <field name="binding_view_types">form</field>
    </record>

    <record id="hr_rfid_controller_io_table_action" model="ir.actions.act_window">
        <field name="name">IO Table</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.rfid.ctrl.io.table.wiz</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="hr_rfid.hr_rfid_controller_io_table_wiz"/>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_ctrl"/>
        <field name="binding_view_types">form</field>
        <field name="groups_id" eval="[(4, ref('hr_rfid.hr_rfid_group_manager'))]"/>
        <field name="target">new</field>
    </record>

    <record model="ir.actions.server" id="action_reload_controller_information">
        <field name="name">Recharger les informations du contrôleur</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_ctrl"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">record.re_read_ctrl_info()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_ctrl"/>
        <field name="binding_view_types">form</field>
    </record>

    <record id="hr_rfid_controller_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.ctrl.tree</field>
      <field name="model">hr.rfid.ctrl</field>
      <field name="arch" type="xml">
        <tree string="Contrôleurs RFID" create="false">
          <field name="name" />
          <field name="serial_number" />
          <field name="hw_version" />
          <field name="sw_version" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_controller_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.ctrl.search</field>
      <field name="model">hr.rfid.ctrl</field>
      <field name="arch" type="xml">
        <search string="Contrôleurs RFID">
          <field name="name" />
          <field name="serial_number" />
          <field name="hw_version" />
          <field name="sw_version" />
        </search>
      </field>
    </record>

    <record id="hr_rfid_door_open_close_wiz_form" model="ir.ui.view">
      <field name="name">hr.rfid.door.open.close.wiz.form</field>
      <field name="model">hr.rfid.door.open.close.wiz</field>
      <field name="arch" type="xml">
        <form string="Ouvrir/fermer la porte">
          <group>
            <field name="doors">
              <tree>
                <field name="name" />
                <field name="controller_id" />
                <field name="card_type" />
              </tree>
            </field>
            <field name="time" />
          </group>
          <footer>
            <button name="open_doors" type="object" string="Porte ouvertes" class="oe_highlight" />
            <button name="close_doors" type="object" string="Ferme la portes" class="oe_highlight" />
            <button special="cancel" string="Cancel" />
          </footer>
        </form>
      </field>
    </record>

    <act_window id="hr_rfid_door_open_close_wiz_act_window"
                name="Ouvrir/fermer la portes"
                binding_model="hr.rfid.door"
                res_model="hr.rfid.door.open.close.wiz"
                view_mode="form"
                target="new" />

    <record id="hr_rfid_door_open_close_wiz_action" model="ir.actions.act_window">
      <field name="name">Ouvrir/fermer la porte</field>
      <field name="res_model">hr.rfid.door.open.close.wiz</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_door_open_close_wiz_form" />
      <field name="target">new</field>
    </record>

    <record id="hr_rfid_door_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.door.form</field>
      <field name="model">hr.rfid.door</field>
      <field name="arch" type="xml">
        <form create="false" delete="false">
          <div class="oe_button_box" name="button_box">
            <button name="open_door"
                    type="object"
                    string="Porte ouverte"
                    help="Will only open for 3 seconds"
                    icon="fa-check"
                    groups="hr_rfid.hr_rfid_view_door_open_close" />
            <button name="close_door"
                    type="object"
                    string="Ferme la porte"
                    help="Will only close for 3 seconds"
                    icon="fa-times"
                    groups="hr_rfid.hr_rfid_view_door_open_close" />
            <button name="%(hr_rfid_door_open_close_wiz_action)d"
                    id="hr_rfid_door_open_close_btn"
                    type="action"
                    string="Ouvrir/fermer la porte"
                    class="oe_highlight"
                    icon="fa-adjust"
                    groups="hr_rfid.hr_rfid_view_door_open_close" />
          </div>

          <group>
            <field name="name" />
            <field name="card_type" />
            <field name="apb_mode" />
            <field name="number" readonly="1" />
            <field name="controller_id" readonly="1" />
          </group>

          <notebook>
            <page string="Groupes d'accès">
              <field name="access_group_ids" context="{'door_id': id}" readonly="1">
                <tree>
                  <field name="access_group_id" />
                  <field name="time_schedule_id" />
                </tree>
              </field>
            </page>

            <page string="Lecteurs">
              <field name="reader_ids" readonly="1">
                <tree>
                  <field name="number" />
                  <field name="reader_type" />
                  <field name="controller_id" />
                </tree>
              </field>
            </page>

            <page string="Événements">
              <field name="user_event_ids" readonly="1">
                <tree>
                  <field name="event_time" />
                  <field name="ctrl_addr" />
                  <field name="employee_id" />
                  <field name="reader_id" />
                  <field name="card_id" />
                </tree>
              </field>
            </page>

            <page string="Zones">
              <field name="zone_ids" readonly="1" />
            </page>
          </notebook>

          <div class="oe_chatter">
              <field name="message_follower_ids" widget="mail_followers" />
              <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>
<!--    TODO delete buttons and move the actions-->
    <record model="ir.actions.server" id="action_open_door">
        <field name="name">Porte ouverte</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_door"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">record.open_door()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_door"/>
        <field name="binding_view_types">form</field>
        <field name="groups_id" eval="[(4,ref('hr_rfid.hr_rfid_view_door_open_close'))]"/>
    </record>

    <record model="ir.actions.server" id="action_close_door">
        <field name="name">Ferme la porte</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_door"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">record.close_door()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_door"/>
        <field name="binding_view_types">form</field>
        <field name="groups_id" eval="[(4,ref('hr_rfid.hr_rfid_view_door_open_close'))]"/>
    </record>

    <record id="hr_rfid_door_view_tree" model="ir.ui.view">
        <field name="name">hr.rfid.door.tree</field>
        <field name="model">hr.rfid.door</field>
        <field name="arch" type="xml">
          <tree create="false" delete="false">
            <field name="name" />
            <field name="controller_id" />
            <field name="card_type" />
            <field name="apb_mode" />
            <button name="open_door"
                  type="object"
                  string="Porte ouverte"
                  help="Will only open for 3 seconds"
                  groups="hr_rfid.hr_rfid_view_door_open_close" />
            <button name="close_door"
                  type="object"
                  string="Ferme la porte"
                  help="Will only close for 3 seconds"
                  groups="hr_rfid.hr_rfid_view_door_open_close" />
        </tree>
      </field>
    </record>


    <record id="hr_rfid_door_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.door.search</field>
      <field name="model">hr.rfid.door</field>
      <field name="arch" type="xml">
        <search>
          <field name="name" />
          <field name="controller_id" />
          <field name="card_type" />
        </search>
      </field>
    </record>

    <record id="hr_rfid_time_schedule_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.time.schedule.form</field>
      <field name="model">hr.rfid.time.schedule</field>
      <field name="arch" type="xml">
        <form create="0" delete="0">
          <sheet>
            <group>
              <field name="name" />
              <field name="number" />
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>

    <record id="hr_rfid_time_schedule_view_kanban" model="ir.ui.view">
      <field name="name">hr.rfid.time.schedule.kanban</field>
      <field name="model">hr.rfid.time.schedule</field>
      <field name="arch" type="xml">
        <kanban create="0" delete="0">
          <field name="id" />
          <field name="name" />
          <field name="number" />
          <templates>
            <t t-name="kanban-box">
              <div class="oe_product_vignette oe_kanban_global_click">
                <ul style="list-style:none;margin:0;padding0;">
                  <li><field name="name"/></li>
                  <li>TS Number: <field name="number" /></li>
                </ul>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record id="hr_rfid_time_schedule_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.time.schedule.tree</field>
      <field name="model">hr.rfid.time.schedule</field>
      <field name="arch" type="xml">
        <tree create="false" delete="false">
          <field name="name" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_reader_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.reader.form</field>
      <field name="model">hr.rfid.reader</field>
      <field name="arch" type="xml">
        <form create="false" delete="false">
          <sheet>
            <div class="oe_title" modifiers="{}">
              <h1>
                <field name="name"/>
              </h1>
            </div>
            <group string="Setup information">
              <field name="mode" />
              <field name="reader_type"/>
            </group>
            <group string="Information">
              <field name="number" readonly="1" />
              <field name="controller_id" readonly="1" />
              <field name="door_id" readonly="1" attrs="{'invisible':[('door_id','=',False)]}" />
            </group>
            <group colspan="4" attrs="{'invisible':[('door_id','!=',False)]}">
              <field name="door_ids" readonly="1">
                <tree>
                  <field name="name" />
                  <field name="controller_id" />
                  <field name="card_type" />
                  <field name="apb_mode" />
                </tree>
              </field>
            </group>
            <group colspan="4">
              <field name="user_event_ids" readonly="1">
                <tree>
                  <field name="event_time"/>
                  <field name="employee_id"/>
                  <field name="card_id"/>
                  <field name="door_id"/>
                </tree>
              </field>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>

    <record id="hr_rfid_reader_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.reader.tree</field>
      <field name="model">hr.rfid.reader</field>
      <field name="arch" type="xml">
        <tree create="false" delete="false">
          <field name="name" />
          <field name="mode" />
          <field name="controller_id" />
          <field name="reader_type" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_reader_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.reader.search</field>
      <field name="model">hr.rfid.reader</field>
      <field name="arch" type="xml">
        <search>
          <field name="name" />
          <field name="mode" />
          <field name="controller_id" />
          <field name="reader_type" />
        </search>
      </field>
    </record>

    <record id="hr_rfid_user_ev_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.user.ev.form</field>
      <field name="model">hr.rfid.event.user</field>
      <field name="arch" type="xml">
        <form  create="0" delete="0" edit="0">
          <group>
            <field name="name" />
            <field name="workcode" attrs="{'invisible': [('workcode','=', '-')]}" />
            <field name="workcode_id" attrs="{'invisible': [('workcode_id','=', False)]}" />
            <field name="event_action" readonly="1" />
            <field name="event_time" readonly="1" />
            <field name="create_date" readonly="1" string="Receive Date"
                   help="Time odoo received the event" />
            <field name="ctrl_addr" readonly="1" />
            <field name="employee_id" readonly="1" attrs="{'invisible':[('employee_id','=',False)]}" />
            <field name="contact_id" readonly="1" attrs="{'invisible':[('contact_id','=',False)]}" />
            <field name="door_id" readonly="1" />
            <field name="reader_id" readonly="1" />
            <field name="card_id" readonly="1" />
            <field name="command_id" readonly="1" />
          </group>
        </form>
      </field>
    </record>

    <record id="hr_rfid_user_ev_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.user.ev.tree</field>
      <field name="model">hr.rfid.event.user</field>
      <field name="arch" type="xml">
        <tree create="0" delete="0">
          <field name="event_time" />
          <field name="employee_id" />
          <field name="contact_id" />
          <field name="event_action" />
          <field name="reader_id" />
          <field name="door_id" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_user_ev_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.user.ev.search</field>
      <field name="model">hr.rfid.event.user</field>
      <field name="arch" type="xml">
        <search>
          <field name="name" />
          <field name="door_id" />
          <field name="event_action" />
          <field name="event_time" />
          <field name="employee_id" />
          <!-- <field name="name" />
          </field> -->
          <field name="card_id" />
            <!-- <field name="number" />
            <field name="card_type" />
          </field> -->

          <filter name="granted" string="Statut: Accordé"
                  domain="[('event_action', '=', '1')]" />
          <filter name="granted" string="Statut: Refusé"
                  domain="[('event_action', '!=', '1')]" />
          <separator />
          <filter name="last_week" string="Events from last week"
                  domain="[('event_time', '>=', (context_today()-datetime.timedelta(days=7)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="last_month" string="Events from last month"
                  domain="[('event_time', '>=', (context_today()-datetime.timedelta(days=30)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="last_year" string="Events from last year"
                  domain="[('event_time', '>=', (context_today()-datetime.timedelta(days=365)).strftime('%%Y-%%m-%%d'))]" />
          <separator />
          <filter name="this_day" string="Events from today"
                  domain="[('event_time', '&gt;',  (context_today()-datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d')),('event_time', '&lt;',  (context_today()+datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="this_week" string="Events from this week"
                  domain="[('event_time', '&gt;=', (context_today()-datetime.timedelta(days=context_today().weekday())).strftime('%%Y-%%m-%%d')),('event_time', '&lt;=', (context_today()-datetime.timedelta(days=context_today().weekday())+ datetime.timedelta(days=6)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="this_month" string="Events from this month"
                  domain="[('event_time', '&gt;=', context_today().strftime('%%Y-%%m-1'))]" />
          <filter name="this_year" string="Events from this year"
                  domain="[('event_time', '&gt;=', (datetime.date(datetime.date.today().year, 1, 1)).strftime('%%Y-%%m-%%d')),('event_time', '&lt;=', (datetime.date(datetime.date.today().year, 12, 31)).strftime('%%Y-%%m-%%d'))]" />
          <separator />
        </search>
      </field>
    </record>

    <record id="hr_rfid_user_ev_view_calendar" model="ir.ui.view">
      <field name="name">hr.rfid.user.ev.calendar</field>
      <field name="model">hr.rfid.event.user</field>
      <field name="arch" type="xml">
        <calendar date_start="event_time" date_stop="event_time" color="action_string">
          <field name="employee_id" />
          <field name="door_id">
            <!-- <field name="controller_id" /> -->
          </field>
          <field name="action_string" />
        </calendar>
      </field>
    </record>

    <record id="hr_rfid_user_ev_view_pivot" model="ir.ui.view">
      <field name="name">hr.rfid.user.ev.pivot</field>
      <field name="model">hr.rfid.event.user</field>
      <field name="arch" type="xml">
        <pivot string="Event" disable_linking="True">
          <field name="event_time" type="row" />
          <field name="event_action" type="col" />
        </pivot>
      </field>
    </record>

    <record id="hr_rfid_sys_ev_wiz_form" model="ir.ui.view">
      <field name="name">hr.rfid.sys.ev.add.card.wiz.form</field>
      <field name="model">hr.rfid.event.sys.wiz</field>
      <field name="arch" type="xml">
        <form string="Ajouter Carte" create="0" delete="0" edit="0">
          <group>
            <field name="card_number" />
            <field name="employee_id" />
            <field name="contact_id" />
            <field name="card_type" />
            <field name="cloud_card" />
            <field name="active" />
            <field name="activate_on" />
            <field name="deactivate_on" />
          </group>
          <footer>
            <button name="add_card" type="object"
                    string="Add this unknown card to" class="oe_highlight" />
            <button special="cancel" string="Cancel" />
          </footer>
        </form>
      </field>
    </record>

    <record id="hr_rfid_sys_ev_wiz_action" model="ir.actions.act_window">
      <field name="name">Ajouter Carte</field>
      <field name="res_model">hr.rfid.event.sys.wiz</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_sys_ev_wiz_form" />
      <field name="target">new</field>
    </record>

    <record id="hr_rfid_sys_ev_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.sys.ev.form</field>
      <field name="model">hr.rfid.event.system</field>
      <field name="arch" type="xml">
        <form create="0" delete="0" edit="0">
          <sheet>
             <div class="oe_button_box" name="button_box" modifiers="{}">
              <button string="Ajouter Carte" name="%(hr_rfid_sys_ev_wiz_action)d" id="hr_rfid_sys_ev_add_card_btn" type="action" class="oe_stat_button" icon="fa-plus-square"
              attrs="{'invisible':[('error_description','!=','Could not find the card')]}"/>
            </div>
            <div class="oe_title" modifiers="{}">
              <h1 modifiers="{}">
                <field name="event_action" readonly="1"/>
              </h1>
              <field name="name" readonly="1"/>
            </div>
            <group>
              <group string="Où">
                <field name="controller_id" readonly="1"/>
                <field name="webstack_id" readonly="1"/>
                <field name="timestamp" readonly="1"/>
                <field name="occurrences" readonly="1" attrs="{'invisible':[('occurrences','&lt;=','1')]}" />
                <field name="last_occurrence" readonly="1" attrs="{'invisible':[('occurrences','&lt;=','1')]}" />
              </group>
              <group string="More information" colspan="4">
                <field name="error_description" readonly="1"/>
              </group>
              <group string="Debug Information" groups="base.group_no_one" colspan="4">
                <field name="input_js" readonly="1"/>
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="hr_rfid_add_card_action" model="ir.actions.act_window">
        <field name="name">Ajouter Carte</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.rfid.event.sys.wiz</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="hr_rfid.hr_rfid_sys_ev_wiz_form"/>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_event_system"/>
        <field name="target">new</field>
    </record>

    <record id="hr_rfid_sys_ev_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.sys.ev.tree</field>
      <field name="model">hr.rfid.event.system</field>
      <field name="arch" type="xml">
        <tree create="false" delete="false">
          <field name="webstack_id" />
          <field name="controller_id" />
          <field name="occurrences" />
          <field name="timestamp" />
          <field name="last_occurrence" />
          <field name="event_action" />
          <field name="error_description" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_sys_ev_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.sys.ev.search</field>
      <field name="model">hr.rfid.event.system</field>
      <field name="arch" type="xml">
        <search>
          <field name="webstack_id" />
          <field name="controller_id" />
          <field name="timestamp" />
          <field name="event_action" />
          <field name="error_description" />

          <filter name="last_week" string="Events from last week"
                  domain="[('timestamp', '>=', (context_today()-datetime.timedelta(days=7)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="last_month" string="Events from last month"
                  domain="[('timestamp', '>=', (context_today()-datetime.timedelta(days=30)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="last_year" string="Events from last year"
                  domain="[('timestamp', '>=', (context_today()-datetime.timedelta(days=365)).strftime('%%Y-%%m-%%d'))]" />
          <separator />
          <filter name="this_day" string="Events from today"
                  domain="[('timestamp', '&gt;',  (context_today()-datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d')),('timestamp', '&lt;',  (context_today()+datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="this_week" string="Events from this week"
                  domain="[('timestamp', '&gt;=', (context_today()-datetime.timedelta(days=context_today().weekday())).strftime('%%Y-%%m-%%d')),('timestamp', '&lt;=', (context_today()-datetime.timedelta(days=context_today().weekday())+ datetime.timedelta(days=6)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="this_month" string="Events from this month"
                  domain="[('timestamp', '&gt;=', context_today().strftime('%%Y-%%m-1'))]" />
          <filter name="this_year" string="Events from this year"
                  domain="[('timestamp', '&gt;=', (datetime.date(datetime.date.today().year, 1, 1)).strftime('%%Y-%%m-%%d')),('timestamp', '&lt;=', (datetime.date(datetime.date.today().year, 12, 31)).strftime('%%Y-%%m-%%d'))]" />
          <separator />

          <newline />
          <group expand="0" string="Group By">
            <filter string="Module" name="module" domain="[]" context="{'group_by':'webstack_id'}" />
            <filter string="Controller" name="controller" domain="[]" context="{'group_by':'controller_id'}" />
            <filter string="Time" name="event_time" domain="[]" context="{'group_by':'timestamp'}" />
            <filter string="Event Type" name="event_type" domain="[]" context="{'group_by':'event_action'}" />
          </group>
        </search>
      </field>
    </record>

    <record id="hr_rfid_sys_ev_view_calendar" model="ir.ui.view">
      <field name="name">hr.rfid.sys.ev.calendar</field>
      <field name="model">hr.rfid.event.system</field>
      <field name="arch" type="xml">
        <calendar date_start="timestamp" date_stop="timestamp" color="event_action">
          <field name="webstack_id" />
          <field name="controller_id" />
        </calendar>
      </field>
    </record>

    <record id="hr_rfid_system_ev_view_pivot" model="ir.ui.view">
      <field name="name">hr.rfid.system.ev.pivot</field>
      <field name="model">hr.rfid.event.system</field>
      <field name="arch" type="xml">
        <pivot string="Event" disable_linking="True">
          <field name="timestamp" type="row" />
          <field name="webstack_id" type="col" />
          <field name="controller_id" type="col" />
        </pivot>
      </field>
    </record>

    <record id="hr_rfid_command_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.command.form</field>
      <field name="model">hr.rfid.command</field>
      <field name="arch" type="xml">
        <form create="0" delete="0" edit="0">
          <sheet>
          <header>
            <field name="status" widget="Statutbar" Statutbar_visible="Wait,Process,Success,Failure"/>
          </header>
            <div class="oe_title" modifiers="{}">
              <h1 modifiers="{}">
                <field name="cmd" readonly="1"/>
              </h1>
            </div>
            <group>
              <group string="Information">
                <field name="name" readonly="1"/>
                <field name="status" readonly="1"/>
                <field name="error" readonly="1" attrs="{'invisible':[('ex_timestamp','=',False)]}"/>
              </group>
              <group string="Où">
                <field name="controller_id" readonly="1"/>
                <field name="webstack_id" readonly="1"/>
              </group>
              <group string="More information">
                <field name="cr_timestamp" readonly="1"/>
                <field name="ex_timestamp" readonly="1"/>
                <field name="retries" readonly="1"/>
              </group>
              <group string="Debug Information" groups="base.group_no_one" colspan="4">
                <field name="request" readonly="1"/>
                <field name="response" readonly="1"/>
                <field name="cmd_data" readonly="1"/>
                <field name="card_number" readonly="1"/>
                <field name="pin_code" readonly="1"/>
                <field name="ts_code" readonly="1"/>
                <field name="rights_data" readonly="1"/>
                <field name="rights_mask" readonly="1"/>
              </group>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="hr_rfid_command_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.command.tree</field>
      <field name="model">hr.rfid.command</field>
      <field name="arch" type="xml">
<!--        <tree create="false" delete="false" decoration-danger="status == 'Failure'" decoration-information="status == 'Process'">-->
        <tree create="false" delete="false">
          <field name="webstack_id" />
          <field name="controller_id" />
          <field name="cmd" />
          <field name="status" />
          <field name="error" />
          <field name="cr_timestamp" />
          <field name="ex_timestamp" />
          <field name="retries" />
        </tree>
      </field>
    </record>

    <record id="hr_rfid_command_view_search" model="ir.ui.view">
      <field name="name">hr.rfid.command.search</field>
      <field name="model">hr.rfid.command</field>
      <field name="arch" type="xml">
        <search>
          <field name="webstack_id" />
          <field name="controller_id" />
          <field name="cmd" />
          <field name="status" />
          <field name="error" />
          <field name="cr_timestamp" />
          <field name="ex_timestamp" />

          <filter name="last_week" string="Commands from last week"
                  domain="[('cr_timestamp', '>=', (context_today()-datetime.timedelta(days=7)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="last_month" string="Commands from last month"
                  domain="[('cr_timestamp', '>=', (context_today()-datetime.timedelta(days=30)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="last_year" string="Commands from last year"
                  domain="[('cr_timestamp', '>=', (context_today()-datetime.timedelta(days=365)).strftime('%%Y-%%m-%%d'))]" />
          <separator />
          <filter name="this_day" string="Commands from today"
                  domain="[('cr_timestamp', '&gt;',  (context_today()-datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d')),('cr_timestamp', '&lt;',  (context_today()+datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="this_week" string="Commands from this week"
                  domain="[('cr_timestamp', '&gt;=', (context_today()-datetime.timedelta(days=context_today().weekday())).strftime('%%Y-%%m-%%d')),('cr_timestamp', '&lt;=', (context_today()-datetime.timedelta(days=context_today().weekday())+ datetime.timedelta(days=6)).strftime('%%Y-%%m-%%d'))]" />
          <filter name="this_month" string="Commands from this month"
                  domain="[('cr_timestamp', '&gt;=', context_today().strftime('%%Y-%%m-1'))]" />
          <filter name="this_year" string="Commands from this year"
                  domain="[('cr_timestamp', '&gt;=', (datetime.date(datetime.date.today().year, 1, 1)).strftime('%%Y-%%m-%%d')),('cr_timestamp', '&lt;=', (datetime.date(datetime.date.today().year, 12, 31)).strftime('%%Y-%%m-%%d'))]" />
          <separator />

          <newline />
          <group expand="0" string="Group By">
            <filter string="Module" name="module" domain="[]" context="{'group_by':'webstack_id'}" />
            <filter string="Controller" name="controller" domain="[]" context="{'group_by':'controller_id'}" />
            <filter string="Command" name="command" domain="[]" context="{'group_by':'cmd'}" />
            <filter string="Status" name="status" domain="[]" context="{'group_by':'status'}" />
            <filter string="Error" name="error" domain="[]" context="{'group_by':'error'}" />
            <filter string="Creation Time" name="create_time" domain="[]" context="{'group_by':'cr_timestamp'}" />
            <filter string="Execution Time" name="exec_time" domain="[]" context="{'group_by':'ex_timestamp'}" />
            <filter string="Command retries" name="retries" domain="[]" context="{'group_by':'retries'}" />
          </group>
        </search>
      </field>
    </record>

    <record id="hr_rfid_command_view_calendar" model="ir.ui.view">
      <field name="name">hr.rfid.command.calendar</field>
      <field name="model">hr.rfid.command</field>
      <field name="arch" type="xml">
        <calendar date_start="cr_timestamp" date_stop="ex_timestamp" color="webstack_id">
          <field name="webstack_id" />
          <field name="controller_id" />
          <field name="cmd" />
          <field name="status" />
          <field name="error" />
        </calendar>
      </field>
    </record>

    <record id="hr_rfid_zone_doors_wiz" model="ir.ui.view">
      <field name="name">hr.rfid.zone.wiz.form</field>
      <field name="model">hr.rfid.zone.doors.wiz</field>
      <field name="arch" type="xml">
        <form string="Add/Supprimer des portes">
          <group>
            <field name="zone_id" readonly="1" />
            <field name="door_ids" widget="many2many_tags" />
          </group>
          <footer>
            <button name="add_doors" type="object"
                    string="Ajouter des portes" class="oe_highlight" />
            <button name="remove_doors" type="object"
                    string="Supprimer des portes" class="oe_highlight" />
            <button special="cancel" string="Cancel" />
          </footer>
        </form>
      </field>
    </record>

    <record id="hr_rfid_zone_doors_wiz_action" model="ir.actions.act_window">
      <field name="name">Add/Supprimer des portes</field>
      <field name="res_model">hr.rfid.zone.doors.wiz</field>
<!--      <field name="view_type">form</field>-->
      <field name="view_mode">form</field>
      <field name="view_id" ref="hr_rfid_zone_doors_wiz" />
      <field name="target">new</field>
    </record>

    <record id="hr_rfid_zone_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.zone.form</field>
      <field name="model">hr.rfid.zone</field>
      <field name="arch" type="xml">
        <form>
          <sheet modifiers="{}">
            <div class="oe_button_box" name="button_box" attrs="{'invisible': [('id', '=', False)]}">
              <button name="%(hr_rfid_zone_doors_wiz_action)d" id="hr_rfid_zone_doors_btn" type="action"
                      class="oe_stat_button" icon="fa-table" modifiers="{}" options="{}"
                      string="Ajouter/Supprimer des portes" />
              <button name="clear_employees" id="hr_rfid_zone_clear_employees_btn" type="object"
                      class="oe_stat_button" icon="fa-minus-square" modifiers="{}" options="{}"
                      string="Effacer les employés" />
              <button name="clear_contacts" id="hr_rfid_zone_clear_contacts_btn" type="object"
                      class="oe_stat_button" icon="fa-minus-square" modifiers="{}" options="{}"
                      string="Effacer les contacts" />
            </div>
            <div class="oe_title" modifiers="{}">
              <h1>
                <field name="name"/>
              </h1>
            </div>
            <group>
              <group string="Type de zone">
                <field name="anti_pass_back"/>
                <field name="log_out_on_exit"/>
              </group>
              <notebook colspan="4" attrs="{'invisible': [('id', '=', False)]}">
                <page string="Portes en zone">
                  <field name="door_ids" create="0" write="0" delete="0"/>
                </page>
                <page string="Employés en zone">
                  <field name="employee_ids" create="0" write="0" delete="0"/>
                </page>
                <page string="Contacts en zone">
                  <field name="contact_ids" create="0" write="0" delete="0"/>
                </page>
              </notebook>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </form>
      </field>
    </record>
<!--    TODO remove buttons and move actions-->
    <record id="hr_rfid_zone_doors_action" model="ir.actions.act_window">
        <field name="name">Add/Supprimer des portes</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.rfid.zone.doors.wiz</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="hr_rfid.hr_rfid_zone_doors_wiz"/>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_zone"/>
        <field name="binding_view_types">form</field>
        <field name="target">new</field>
    </record>


    <record model="ir.actions.server" id="action_clear_employees">
        <field name="name">Effacer les employés</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_zone"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">record.clear_employees()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_zone"/>
        <field name="binding_view_types">form</field>
    </record>

    <record model="ir.actions.server" id="action_clear_contacts">
        <field name="name">Effacer les contacts</field>
        <field name="model_id" ref="hr_rfid.model_hr_rfid_zone"/>
        <field name="type">ir.actions.server</field>
        <field name="state">code</field>
        <field name="code">record.clear_contacts()</field>
        <field name="binding_model_id" ref="hr_rfid.model_hr_rfid_zone"/>
        <field name="binding_view_types">form</field>
    </record>

    <record id="hr_rfid_zone_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.zone.tree</field>
      <field name="model">hr.rfid.zone</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" />
          <field name="anti_pass_back" />
          <field name="log_out_on_exit" />
          <field name="door_ids" />
          <field name="employee_ids" />
          <field name="contact_ids" />
        </tree>
      </field>
    </record>

    <!--#######################################################
    #####                 WEBSTACK VIEWS                  #####
    ########################################################-->

    <record id="hr_rfid_workcode_view_form" model="ir.ui.view">
      <field name="name">hr.rfid.workcode.form</field>
      <field name="model">hr.rfid.workcode</field>
      <field name="arch" type="xml">
        <form>
          <sheet>
            <div class="oe_title" modifiers="{}">
              <h1>
                <field name="name"/>
              </h1>
            </div>
            <group>
              <field name="workcode" attrs="{'readonly':[('id','>',0)]}"/>
              <field name="user_action"/>
            </group>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers" />
            <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>

    <record id="hr_rfid_workcode_view_tree" model="ir.ui.view">
      <field name="name">hr.rfid.workcode.tree</field>
      <field name="model">hr.rfid.workcode</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" />
          <field name="workcode" />
          <field name="user_action" />
        </tree>
      </field>
    </record>
    </data>
</odoo>